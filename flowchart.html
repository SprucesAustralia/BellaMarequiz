<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cleaner Onboarding Funnel</title>
    <style>
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background: #f0f0f0;
        }
        #flowchart {
            border: 1px solid #ccc;
        }
    </style>
</head>
<body>
    <svg id="flowchart" width="800" height="800">
        <!-- Funnel Background -->
        <path d="M200,50 L600,50 L500,800 L300,800 Z" fill="lightgrey" opacity="0.5" />

        <!-- Flowchart Elements -->
        <!-- Traffic Sources -->
        <rect x="250" y="50" width="300" height="50" fill="lightblue" />
        <text x="400" y="75" text-anchor="middle" font-size="16">Indeed, Facebook, Airtasker, Existing Database of cleaners</text>
        <text x="400" y="90" text-anchor="middle" font-size="12">30 applicants</text>

        <!-- Register, apply and upload all docs using Interactive Form/Quiz -->
        <rect x="275" y="120" width="250" height="70" fill="lightblue" />
        <a xlink:href="https://spruces.typeform.com/to/WOHuQS4H" target="_blank">
            <rect x="360" y="125" width="80" height="20" fill="lightgreen" />
            <text x="400" y="138" text-anchor="middle" font-size="12">Apply Here</text>
        </a>
        <text x="400" y="160" text-anchor="middle" font-size="16">Register, apply and upload all docs using Interactive Form/Quiz</text>
        <text x="400" y="175" text-anchor="middle" font-size="12">12 completed</text>
        <polygon points="375,200 425,200 450,240 350,240" fill="yellow" /> <!-- Decision -->
        <text x="400" y="225" text-anchor="middle" font-size="14">Pass Quiz?</text>
        <line x1="400" y1="240" x2="400" y2="280" stroke="black" stroke-width="2" /> <!-- Yes -->
        <text x="410" y="260" font-size="12">Yes</text>
        <path d="M425,220 C475,220 525,220 575,220" stroke="black" stroke-width="2" fill="none" /> <!-- No -->
        <text x="500" y="210" font-size="12">No</text>
        <rect x="575" y="200" width="100" height="40" fill="pink" />
        <text x="625" y="225" text-anchor="middle" font-size="14">Rejected</text>

        <!-- Complete 3 Online Courses -->
        <rect x="300" y="280" width="200" height="70" fill="lightblue" />
        <a xlink:href="https://sprucesaustralia.github.io/BellaMarequiz/academy.html" target="_blank">
            <rect x="360" y="285" width="80" height="20" fill="lightgreen" />
            <text x="400" y="298" text-anchor="middle" font-size="12">Courses</text>
        </a>
        <text x="400" y="320" text-anchor="middle" font-size="16">Complete 3 Online Courses</text>
        <text x="400" y="335" text-anchor="middle" font-size="12">5 completed</text>
        <polygon points="375,360 425,360 450,400 350,400" fill="yellow" />
        <text x="400" y="385" text-anchor="middle" font-size="14">Courses Completed?</text>
        <line x1="400" y1="400" x2="400" y2="440" stroke="black" stroke-width="2" />
        <text x="410" y="420" font-size="12">Yes</text>
        <path d="M425,380 C475,380 525,380 575,380" stroke="black" stroke-width="2" fill="none" />
        <text x="500" y="370" font-size="12">No</text>
        <rect x="575" y="360" width="100" height="40" fill="pink" />
        <text x="625" y="385" text-anchor="middle" font-size="14">Rejected</text>

        <!-- Interview -->
        <rect x="325" y="440" width="150" height="50" fill="lightblue" />
        <text x="400" y="465" text-anchor="middle" font-size="16">Book and Attend final zoom Interview with Leo</text>
        <text x="400" y="480" text-anchor="middle" font-size="12">4 completed</text>
        <polygon points="375,510 425,510 450,550 350,550" fill="yellow" />
        <text x="400" y="535" text-anchor="middle" font-size="14">Pass Interview?</text>
        <line x1="400" y1="550" x2="400" y2="590" stroke="black" stroke-width="2" />
        <text x="410" y="570" font-size="12">Yes</text>
        <path d="M425,530 C475,530 525,530 575,530" stroke="black" stroke-width="2" fill="none" />
        <text x="500" y="520" font-size="12">No</text>
        <rect x="575" y="510" width="100" height="40" fill="pink" />
        <text x="625" y="535" text-anchor="middle" font-size="14">Rejected</text>

        <!-- Access Information Page -->
        <rect x="340" y="590" width="120" height="70" fill="lightblue" />
        <a xlink:href="https://sprucesaustralia.github.io/BellaMarequiz/index.html" target="_blank">
            <rect x="375" y="595" width="80" height="20" fill="lightgreen" />
            <text x="415" y="608" text-anchor="middle" font-size="12">Info Page</text>
        </a>
        <text x="400" y="635" text-anchor="middle" font-size="14">Access Information Page (only for qualified)</text>

        <!-- Trial with Trainer -->
        <rect x="350" y="670" width="100" height="50" fill="lightblue" />
        <text x="400" y="695" text-anchor="middle" font-size="14">Trial with Trainer (1 room with existing cleaner)</text>
        <text x="400" y="710" text-anchor="middle" font-size="12">3 booked trial</text>
        <polygon points="375,740 425,740 450,780 350,780" fill="yellow" />
        <text x="400" y="765" text-anchor="middle" font-size="14">Pass Trial?</text>
        <line x1="400" y1="780" x2="400" y2="820" stroke="black" stroke-width="2" />
        <text x="410" y="800" font-size="12">Yes</text>
        <path d="M425,760 C475,760 525,760 575,760" stroke="black" stroke-width="2" fill="none" />
        <text x="500" y="750" font-size="12">No</text>
        <rect x="575" y="740" width="100" height="40" fill="pink" />
        <text x="625" y="765" text-anchor="middle" font-size="14">Rejected</text>

        <!-- Start Working Independently -->
        <rect x="375" y="820" width="50" height="40" fill="lightgreen" />
        <text x="400" y="845" text-anchor="middle" font-size="14">Start Working Independently</text>

        <!-- Referral Path -->
        <path d="M400,860 L700,860 Q750,860 750,740 L750,50 Q750,25 700,25 Z" stroke="purple" stroke-width="2" fill="none" />
        <text x="725" y="300" font-size="14" text-anchor="middle">Referral Launcher</text>

        <!-- Animation Paths -->
        <path id="success_path" d="M400,75 L400,160 L400,220 L400,320 L400,465 L400,635 L400,695 L400,845 L700,860 Q750,860 750,740 L750,50 Q750,25 700,25 L400,25" stroke="none" fill="none" />
        <path id="reject_quiz" d="M400,75 L400,160 L400,220 C475,220 550,220 625,220" stroke="none" fill="none" />
        <path id="reject_courses" d="M400,75 L400,160 L400,220 L400,320 L400,380 C475,380 550,380 625,380" stroke="none" fill="none" />
        <path id="reject_interview" d="M400,75 L400,160 L400,220 L400,320 L400,465 L400,530 C475,530 550,530 625,530" stroke="none" fill="none" />
        <path id="reject_trial" d="M400,75 L400,160 L400,220 L400,320 L400,465 L400,635 L400,760 C475,760 550,760 625,760" stroke="none" fill="none" />

        <!-- Ball -->
        <circle id="ball" cx="400" cy="75" r="10" fill="red" />
    </svg>
    <script>
        // Embedded JavaScript
        const paths = ['success_path', 'reject_quiz', 'reject_courses', 'reject_interview', 'reject_trial'];
        const ball = document.getElementById('ball');
        const svgNS = 'http://www.w3.org/2000/svg';

        function startAnimation() {
            // Remove any existing animation
            while (ball.firstChild) {
                ball.removeChild(ball.firstChild);
            }

            // Choose a random path
            const pathId = paths[Math.floor(Math.random() * paths.length)];
            const duration = pathId === 'success_path' ? '12s' : '6s'; // Longer for success path due to referral loop

            // Create and configure the animation
            const animateMotion = document.createElementNS(svgNS, 'animateMotion');
            animateMotion.setAttribute('dur', duration);
            animateMotion.setAttribute('repeatCount', '1');
            animateMotion.setAttribute('fill', 'freeze');
            const mpath = document.createElementNS(svgNS, 'mpath');
            mpath.setAttribute('xlink:href', `#${pathId}`);
            animateMotion.appendChild(mpath);
            ball.appendChild(animateMotion);
            animateMotion.beginElement();

            // Handle animation end
            animateMotion.addEventListener('endEvent', () => {
                ball.removeChild(animateMotion);
                ball.setAttribute('cx', '400');
                ball.setAttribute('cy', '75');
                setTimeout(startAnimation, 1000); // 1-second delay before next ball
            });
        }

        // Start the animation
        startAnimation();
    </script>
</body>
</html>
